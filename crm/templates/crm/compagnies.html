{% extends 'crm/base.html' %} {% block content %}
<div class="container-fluid">
  <!--BREADCRUMB-->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">Compagnies</li>
    </ol>
  </nav>
  <!--BREADCRUMB END-->
</div>
<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-8">
      {% if not compagnies %}
      <h1 class="p-3">Company table is empty</h1>
      {% else %}

      <h1 class="p-3 position-relative">
        Compagnies Table
        <a
          class="btn btn-secondary position-absolute top-50 end-0"
          href="{% url 'add_company' %}"
          >ADD COMPANY</a
        >
      </h1>

      <table class="table table-hover table-striped table-bordered text-center">
        <tr class="table table-dark">
          <th>Name</th>
          <th>City</th>
          <th>NÂ° of Contacts</th>
          <th>Action</th>
        </tr>
        {% for company in compagnies %}
        <tr>
          <td>{{ company.name }}</td>
          <td>{{ company.city }}</td>
          <td>{{ company.contact_set.count }}</td>
          <td>
            <a
              class="btn btn-secondary btn-sm"
              href="{% url 'company' company.id %}"
              >Detail</a
            >
            <!-- Button trigger modal -->
            <button
              type="button"
              class="btn btn-danger btn-sm"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal{{ company.id }}"
            >
              Delete
            </button>
            <!--Modal Detail Include-->
            {% include 'crm/include/delete_company_modal.html' %}
          </td>
        </tr>
        {% endfor %}
      </table>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
